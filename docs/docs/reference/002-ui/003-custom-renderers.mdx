import {PlatformSelector} from '@site/src/components/PlatformSelector/PlatformSelector';
import {PlatformSection} from '@site/src/components/PlatformSection/PlatformSection';

import ConfigReactJs from './_003-custom-renderers/#react/config.mdx';
import ConfigJavaScript from './_003-custom-renderers/#js/config.mdx';

import ResponseInterfaceReactJs from './_003-custom-renderers/#react/response-interfaces.mdx';
import ResponseInterfaceJavaScript from './_003-custom-renderers/#js/response-interfaces.mdx';

import PromptInterfaceReactJs from './_003-custom-renderers/#react/prompt-interface.mdx';
import PromptInterfaceJavaScript from './_003-custom-renderers/#js/prompt-interface.mdx';

# Custom Renderers

The custom renderers feature allows developers to define customised display logic for messages in the chat area.

This feature is particularly useful when the data is not a simple string, but a complex object that needs to be rendered
in a specific way, or when the developer needs to render additional elements that are not part of the response itself
but is related to it.

---

### Usage

Custom renderers can be provided to the `AiChat` component as part of the `messageOptions` prop.

<PlatformSelector reactJs={ConfigReactJs} javascript={ConfigJavaScript}/>

---

## Interface

Below are the interfaces that custom renderers should implement.

> ### Response Custom Renderers

<PlatformSelector reactJs={ResponseInterfaceReactJs} javascript={ResponseInterfaceJavaScript}/>

> ### User Prompt Custom Renderers

<PlatformSelector reactJs={PromptInterfaceReactJs} javascript={PromptInterfaceJavaScript}/>

---

## Behaviour

Custom renderers can either be provided for responses from the AI assistant, or for user prompts that are displayed
in the chat area.

For AI responses, the behaviour of custom renders depends on whether the data is streamed from the server or received
in a single batch.

> ### Rendering User Prompts

For user prompts, the custom renderer will be **called once the message is sent**.<br />
The custom renderer will receive the message content and the user prompt.

> ### Rendering Batched AI Responses

For batched data, the custom renderer will only be **called once the message has been fully received**.

> ### Rendering Streamed AI Responses

For streamed data, the custom renderer will be **called when the streaming starts**, and will receive a `RefObject`
that should be pointed to the DOM container element where streamed markdown messages will be appended. The properties
of the custom renderer will be **updated when the streaming is complete** and the message that has been fully received.
